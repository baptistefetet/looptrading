# Story 6.4: Page Watchlist

## Status
Ready for Review

## Story
**As a** user,
**I want** to manage my watchlist,
**so that** I can track specific stocks closely.

## Acceptance Criteria
1. Liste des actions en watchlist avec mini-charts sparkline
2. Score et variation du jour affichés
3. Drag & drop pour réorganiser
4. Bouton ajouter (recherche par symbol)
5. Bouton supprimer avec confirmation
6. Alertes spécifiques par action (prix cible)

## Tasks / Subtasks
- [x] Créer page Watchlist (AC: 1)
  - [x] Route `/watchlist`
  - [x] Layout liste avec cards
  - [x] Fetch watchlist depuis API
- [x] Implémenter sparkline charts (AC: 1)
  - [x] Mini graphique 7 jours pour chaque item
  - [x] Lightweight charts ou canvas custom
  - [x] Couleur selon tendance
- [x] Afficher score et variation (AC: 2)
  - [x] Score avec indicateur visuel (couleur)
  - [x] Variation jour en % et €
  - [x] Prix actuel
- [x] Implémenter drag & drop (AC: 3)
  - [x] Implémentation drag & drop native HTML5
  - [x] Handles de drag
  - [x] Persistance ordre via API
  - [x] Animation smooth
- [x] Implémenter ajout stock (AC: 4)
  - [x] Bouton "+ Ajouter"
  - [x] Modal avec recherche symbol
  - [x] Autocomplete symbols
  - [x] Validation symbol existe
  - [x] POST vers API
- [x] Implémenter suppression (AC: 5)
  - [x] Bouton supprimer sur chaque item
  - [x] Modal confirmation
  - [x] DELETE vers API
  - [x] Animation de suppression
- [x] Implémenter alertes prix cible (AC: 6)
  - [x] Bouton "Alerte" par item
  - [x] Modal : prix cible haut/bas
  - [x] Sauvegarde dans WatchlistItem
  - [x] Indicateur alerte active

## Dev Notes
_À compléter après création du document d'architecture_

### Architecture References
- FR9 : Watchlist personnalisée avec alertes spécifiques
- UI/UX : Drag & drop intuitif (PRD section 3.2)

### Watchlist Item Card Layout
```
+------------------------------------------+
| [drag] AAPL         [sparkline]  [delete]|
|        Apple Inc.                        |
|        $150.25 (+2.5%)    Score: 85     |
|        [Set Alert]                       |
+------------------------------------------+
```

### API Endpoints Used
- `GET /api/watchlist` - Liste items
- `POST /api/watchlist` - Ajouter item
- `DELETE /api/watchlist/:id` - Supprimer
- `PUT /api/watchlist/reorder` - Réordonner
- `PUT /api/watchlist/:id/alert` - Config alerte prix

### Dependencies
- Story 1.4 (Frontend shell) doit être complétée
- Story 4.1 (Score) pour affichage
- Story 3.1 (MarketData) pour sparklines

### Testing
_Standards de test à définir dans le document d'architecture_

## Change Log
| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2026-01-25 | 0.1 | Création initiale de la story | Sarah (PO) |
| 2026-02-08 | 1.0 | Implémentation complète de la page Watchlist (CRUD, reorder, alertes, sparklines) | Codex |
