# Story 6.4: Page Watchlist

## Status
Draft

## Story
**As a** user,
**I want** to manage my watchlist,
**so that** I can track specific stocks closely.

## Acceptance Criteria
1. Liste des actions en watchlist avec mini-charts sparkline
2. Score et variation du jour affichés
3. Drag & drop pour réorganiser
4. Bouton ajouter (recherche par symbol)
5. Bouton supprimer avec confirmation
6. Alertes spécifiques par action (prix cible)

## Tasks / Subtasks
- [ ] Créer page Watchlist (AC: 1)
  - [ ] Route `/watchlist`
  - [ ] Layout liste avec cards
  - [ ] Fetch watchlist depuis API
- [ ] Implémenter sparkline charts (AC: 1)
  - [ ] Mini graphique 7 jours pour chaque item
  - [ ] Lightweight charts ou canvas custom
  - [ ] Couleur selon tendance
- [ ] Afficher score et variation (AC: 2)
  - [ ] Score avec indicateur visuel (couleur)
  - [ ] Variation jour en % et €
  - [ ] Prix actuel
- [ ] Implémenter drag & drop (AC: 3)
  - [ ] Installer `@dnd-kit/core` ou `react-beautiful-dnd`
  - [ ] Handles de drag
  - [ ] Persistance ordre via API
  - [ ] Animation smooth
- [ ] Implémenter ajout stock (AC: 4)
  - [ ] Bouton "+ Ajouter"
  - [ ] Modal avec recherche symbol
  - [ ] Autocomplete symbols
  - [ ] Validation symbol existe
  - [ ] POST vers API
- [ ] Implémenter suppression (AC: 5)
  - [ ] Bouton supprimer sur chaque item
  - [ ] Modal confirmation
  - [ ] DELETE vers API
  - [ ] Animation de suppression
- [ ] Implémenter alertes prix cible (AC: 6)
  - [ ] Bouton "Alerte" par item
  - [ ] Modal : prix cible haut/bas
  - [ ] Sauvegarde dans WatchlistItem
  - [ ] Indicateur alerte active

## Dev Notes
_À compléter après création du document d'architecture_

### Architecture References
- FR9 : Watchlist personnalisée avec alertes spécifiques
- UI/UX : Drag & drop intuitif (PRD section 3.2)

### Watchlist Item Card Layout
```
+------------------------------------------+
| [drag] AAPL         [sparkline]  [delete]|
|        Apple Inc.                        |
|        $150.25 (+2.5%)    Score: 85     |
|        [Set Alert]                       |
+------------------------------------------+
```

### API Endpoints Used
- `GET /api/watchlist` - Liste items
- `POST /api/watchlist` - Ajouter item
- `DELETE /api/watchlist/:id` - Supprimer
- `PUT /api/watchlist/reorder` - Réordonner
- `PUT /api/watchlist/:id/alert` - Config alerte prix

### Dependencies
- Story 1.4 (Frontend shell) doit être complétée
- Story 4.1 (Score) pour affichage
- Story 3.1 (MarketData) pour sparklines

### Testing
_Standards de test à définir dans le document d'architecture_

## Change Log
| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2026-01-25 | 0.1 | Création initiale de la story | Sarah (PO) |
