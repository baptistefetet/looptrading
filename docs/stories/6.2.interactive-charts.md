# Story 6.2: Graphiques interactifs

## Status
Ready for Review

## Story
**As a** user,
**I want** interactive candlestick charts with indicators,
**so that** I can analyze stock price action.

## Acceptance Criteria
1. TradingView Lightweight Charts intégré
2. Graphique chandeliers japonais
3. Overlay indicateurs : SMA, EMA, Bollinger Bands
4. Panneau séparé : RSI, MACD, Volume
5. Zoom, pan, crosshair fonctionnels
6. Timeframes : 1D, 1W, 1M, 3M, 1Y
7. Style dark avec couleurs néon

## Tasks / Subtasks
- [x] Intégrer TradingView Lightweight Charts (AC: 1)
  - [x] Installer `lightweight-charts`
  - [x] Créer composant `StockChart`
  - [x] Configurer options de base
- [x] Implémenter graphique chandeliers (AC: 2)
  - [x] Créer candlestick series
  - [x] Charger données OHLCV
  - [x] Couleurs : vert hausse (#00ff41), rouge baisse
- [x] Ajouter overlay indicateurs (AC: 3)
  - [x] SMA 20, 50, 200 (lignes colorées)
  - [x] EMA 9, 21 (lignes pointillées)
  - [x] Bollinger Bands (bandes avec fill)
  - [x] Toggle pour afficher/masquer chaque indicateur
- [x] Créer panneaux indicateurs séparés (AC: 4)
  - [x] Panneau RSI en bas
  - [x] Panneau MACD avec histogramme
  - [x] Panneau Volume avec couleurs
  - [x] Synchronisation crosshair entre panneaux
- [x] Implémenter interactions (AC: 5)
  - [x] Zoom molette souris
  - [x] Pan drag
  - [x] Crosshair avec tooltip prix/date
  - [x] Reset zoom button
- [x] Implémenter sélecteur timeframe (AC: 6)
  - [x] Boutons : 1D, 1W, 1M, 3M, 1Y
  - [x] Recharger données selon période
  - [x] État actif visuel
- [x] Appliquer style dark/néon (AC: 7)
  - [x] Background noir #0d1117
  - [x] Grid subtle
  - [x] Textes en cyan/gris
  - [x] Crosshair néon

## Dev Notes
_À compléter après création du document d'architecture_

### Architecture References
- FR2 : Graphiques chandeliers interactifs avec indicateurs
- Tech : TradingView Lightweight Charts (PRD section 4.3)

### Lightweight Charts Configuration
```typescript
const chart = createChart(container, {
  width: 800,
  height: 400,
  layout: {
    background: { color: '#0d1117' },
    textColor: '#c9d1d9',
  },
  grid: {
    vertLines: { color: '#21262d' },
    horzLines: { color: '#21262d' },
  },
  crosshair: {
    mode: CrosshairMode.Normal,
    vertLine: { color: '#00d4ff' },
    horzLine: { color: '#00d4ff' },
  },
});
```

### Indicator Colors
- SMA20: cyan (#00d4ff)
- SMA50: yellow (#f0e68c)
- SMA200: magenta (#ff00ff)
- EMA: dashed variants
- Bollinger: semi-transparent fill

### Dependencies
- Story 3.1 (MarketDataService) pour données OHLCV
- Story 3.2-3.3 (Indicateurs) pour overlay

### Testing
_Standards de test à définir dans le document d'architecture_

## Change Log
| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2026-01-25 | 0.1 | Création initiale de la story | Sarah (PO) |
| 2026-02-08 | 1.0 | Implémentation page détail avec graphiques interactifs multi-panneaux et timeframes | Codex |
