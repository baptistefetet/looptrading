# Story 2.3: News financières Yahoo Finance

## Status
Draft

## Story
**As a** user,
**I want** to see financial news for stocks,
**so that** I can stay informed about market events.

## Acceptance Criteria
1. Endpoint `GET /api/news` retourne les news récentes pour la watchlist
2. Endpoint `GET /api/news/:symbol` retourne les news pour une action
3. Données : headline, timestamp, source, link
4. Cache des news (refresh toutes les 15 minutes)
5. Limite de 10 news par action

## Tasks / Subtasks
- [ ] Intégrer Yahoo Finance news (AC: 1, 2)
  - [ ] Utiliser `yahoo-finance2` pour récupérer les news
  - [ ] Route `GET /api/news` pour news de la watchlist
  - [ ] Route `GET /api/news/:symbol` pour une action spécifique
- [ ] Parser les données news (AC: 3)
  - [ ] Mapper vers DTO : headline, timestamp, source, link
  - [ ] Nettoyer le texte si nécessaire
  - [ ] Gérer les news sans certains champs
- [ ] Implémenter cache (AC: 4)
  - [ ] Cache en mémoire par symbol
  - [ ] TTL de 15 minutes
  - [ ] Invalidation possible via endpoint admin
- [ ] Limiter résultats (AC: 5)
  - [ ] Max 10 news par symbol
  - [ ] Query param optionnel `limit`
  - [ ] Tri par date décroissant

## Dev Notes

### Architecture References
- Remplace les news IBKR par Yahoo Finance (simplification)
- Yahoo Finance inclut news de sources variées (Reuters, etc.)

### Yahoo Finance News API
```typescript
import yahooFinance from 'yahoo-finance2';

const result = await yahooFinance.search('AAPL', { newsCount: 10 });
// result.news contient les articles
```

### API Response Format
```typescript
interface NewsItem {
  title: string;
  link: string;
  publisher: string;
  publishedAt: string;
  thumbnail?: string;
}

interface NewsResponse {
  symbol?: string;
  news: NewsItem[];
  fetchedAt: string;
}
```

### Dependencies
- Story 3.1 (MarketDataService) pour la config Yahoo Finance

### Testing
_Standards de test à définir dans le document d'architecture_

## Change Log
| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2026-01-25 | 0.1 | Création initiale (IBKR news) | Sarah (PO) |
| 2026-01-25 | 0.2 | Réécriture : Yahoo Finance news | Winston (Architect) |
