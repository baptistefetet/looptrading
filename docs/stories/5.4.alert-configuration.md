# Story 5.4: Configuration des alertes

## Status
Draft

## Story
**As a** user,
**I want** to configure my alert preferences,
**so that** I receive only relevant notifications.

## Acceptance Criteria
1. Page Settings > Alerts dans le frontend
2. Toggle par stratégie (enable/disable)
3. Seuil de score minimum pour alerte
4. Choix canaux : email, push, les deux
5. Horaires silencieux (optionnel)
6. Sauvegarde via API `PUT /api/settings/alerts`

## Tasks / Subtasks
- [ ] Créer page Settings/Alerts (AC: 1)
  - [ ] Route `/settings/alerts`
  - [ ] Layout cohérent avec reste settings
  - [ ] Sections organisées logiquement
- [ ] Implémenter toggles stratégies (AC: 2)
  - [ ] Toggle Pullback
  - [ ] Toggle Breakout
  - [ ] Toggle MACD Cross
  - [ ] État visuel on/off
- [ ] Implémenter seuil score (AC: 3)
  - [ ] Slider ou input numérique 0-100
  - [ ] Default : 75
  - [ ] Preview : "Alertes si score > X"
- [ ] Implémenter choix canaux (AC: 4)
  - [ ] Checkbox Email
  - [ ] Checkbox Push
  - [ ] Au moins un requis si alertes activées
- [ ] Implémenter horaires silencieux (AC: 5)
  - [ ] Toggle "Horaires silencieux"
  - [ ] Time pickers : début et fin
  - [ ] Jours de la semaine
  - [ ] Stockage timezone utilisateur
- [ ] Créer endpoint API (AC: 6)
  - [ ] Route `PUT /api/settings/alerts`
  - [ ] Body : strategies, minScore, channels, quietHours
  - [ ] Validation Zod
  - [ ] Sauvegarder dans UserSettings

## Dev Notes
_À compléter après création du document d'architecture_

### Architecture References
- FR4 : Alertes configurables
- FR5 : 3 stratégies sélectionnables

### Settings Structure
```typescript
interface AlertSettings {
  strategies: {
    pullback: boolean;
    breakout: boolean;
    macdCross: boolean;
  };
  minScore: number; // 0-100, default 75
  channels: {
    email: boolean;
    push: boolean;
  };
  quietHours: {
    enabled: boolean;
    start: string; // "22:00"
    end: string;   // "08:00"
    days: number[]; // [0,1,2,3,4,5,6] = all days
    timezone: string;
  };
}
```

### UI Components
- Toggle switches pour stratégies
- Slider pour score minimum
- Checkboxes pour canaux
- Time pickers pour horaires silencieux

### Dependencies
- Story 1.4 (Frontend shell) doit être complétée
- Story 5.1-5.3 (Alert system) doivent être complétées

### Testing
_Standards de test à définir dans le document d'architecture_

## Change Log
| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2026-01-25 | 0.1 | Création initiale de la story | Sarah (PO) |
