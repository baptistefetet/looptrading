# Story 6.1: Dashboard principal

## Status
Draft

## Story
**As a** user,
**I want** a dashboard showing key information at a glance,
**so that** I can quickly assess the market situation.

## Acceptance Criteria
1. Widget Alertes actives (liste des 10 dernières)
2. Widget Top Opportunités (5 meilleurs scores)
3. Widget Résumé Portfolio (total value, daily P&L)
4. Widget Watchlist condensée (mini-list avec scores)
5. Refresh automatique via polling (TanStack Query, 30s)
6. Style terminal/geek avec couleurs néon

## Tasks / Subtasks
- [ ] Créer layout Dashboard (AC: 6)
  - [ ] Grid responsive (CSS Grid ou Flexbox)
  - [ ] Disposition widgets optimale
  - [ ] Style terminal avec bordures néon
- [ ] Widget Alertes actives (AC: 1)
  - [ ] Composant `AlertsWidget`
  - [ ] Liste 10 dernières alertes non-acknowledged
  - [ ] Afficher : symbol, stratégie, score, timestamp
  - [ ] Bouton acknowledge
  - [ ] Effet glow sur nouvelles alertes
- [ ] Widget Top Opportunités (AC: 2)
  - [ ] Composant `TopOpportunitiesWidget`
  - [ ] Fetch 5 meilleurs scores via API
  - [ ] Afficher : symbol, score (jauge visuelle), prix, variation
  - [ ] Clic → page détail
- [ ] Widget Résumé Portfolio (AC: 3)
  - [ ] Composant `PortfolioSummaryWidget`
  - [ ] Fetch données portfolio via API `/api/portfolio/positions`
  - [ ] Afficher : valeur totale, P&L jour (€ et %), P&L total
  - [ ] Couleurs : vert/rouge selon P&L
- [ ] Widget Watchlist condensée (AC: 4)
  - [ ] Composant `WatchlistWidget`
  - [ ] Mini-liste 5-10 items
  - [ ] Afficher : symbol, prix, score mini
  - [ ] Lien "Voir tout" → page Watchlist
- [ ] Implémenter refresh polling (AC: 5)
  - [ ] Hook `useAlerts` avec TanStack Query (refetchInterval: 30000)
  - [ ] Hook `useTopOpportunities` avec polling
  - [ ] Indicateur "dernière mise à jour" sur chaque widget

## Dev Notes

### Architecture References
- Architecture v3.0 section 10 : Frontend Architecture
- Polling via TanStack Query (pas de WebSocket)
- UI/UX : Dark mode, esthétique terminal, couleurs néon

### Widget Layout (Desktop 1440px+)
```
+------------------+------------------+
|     Alertes      |  Top Opportunités|
|     (large)      |     (medium)     |
+------------------+------------------+
|   Portfolio      |    Watchlist     |
|   Summary        |    condensée     |
+------------------+------------------+
```

### Polling Strategy
```typescript
// hooks/useAlerts.ts
export function useAlerts() {
  return useQuery({
    queryKey: ['alerts'],
    queryFn: () => api.get('/alerts'),
    refetchInterval: 30_000, // 30 secondes
  });
}
```

### Dependencies
- Story 1.4 (Frontend shell) doit être complétée
- Story 4.1 (Score) pour Top Opportunités
- Story 5.1 (Alerts) pour widget alertes
- Story 2.1 (Portfolio) pour résumé

### Testing
- Tests composants avec Vitest + React Testing Library

## Change Log
| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2026-01-25 | 0.1 | Création initiale de la story | Sarah (PO) |
| 2026-01-25 | 0.2 | Remplacement WebSocket par polling (arch v3.0) | Winston (Architect) |
