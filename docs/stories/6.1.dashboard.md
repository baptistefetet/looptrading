# Story 6.1: Dashboard principal

## Status
Ready for Review

## Story
**As a** user,
**I want** a dashboard showing key information at a glance,
**so that** I can quickly assess the market situation.

## Acceptance Criteria
1. Widget Alertes actives (liste des 10 dernières)
2. Widget Top Opportunités (5 meilleurs scores)
3. Widget Résumé Portfolio (total value, daily P&L)
4. Widget Watchlist condensée (mini-list avec scores)
5. Refresh automatique via polling (TanStack Query, 30s)
6. Style terminal/geek avec couleurs néon

## Tasks / Subtasks
- [x] Créer layout Dashboard (AC: 6)
  - [x] Grid responsive (CSS Grid ou Flexbox)
  - [x] Disposition widgets optimale
  - [x] Style terminal avec bordures néon
- [x] Widget Alertes actives (AC: 1)
  - [x] Composant `AlertsWidget`
  - [x] Liste 10 dernières alertes non-acknowledged
  - [x] Afficher : symbol, stratégie, score, timestamp
  - [x] Bouton acknowledge
  - [x] Effet glow sur nouvelles alertes
- [x] Widget Top Opportunités (AC: 2)
  - [x] Composant `TopOpportunitiesWidget`
  - [x] Fetch 5 meilleurs scores via API
  - [x] Afficher : symbol, score (jauge visuelle), prix, variation
  - [x] Clic → page détail
- [x] Widget Résumé Portfolio (AC: 3)
  - [x] Composant `PortfolioSummaryWidget`
  - [x] Fetch données portfolio via API `/api/portfolio/positions`
  - [x] Afficher : valeur totale, P&L jour (€ et %), P&L total
  - [x] Couleurs : vert/rouge selon P&L
- [x] Widget Watchlist condensée (AC: 4)
  - [x] Composant `WatchlistWidget`
  - [x] Mini-liste 5-10 items
  - [x] Afficher : symbol, prix, score mini
  - [x] Lien "Voir tout" → page Watchlist
- [x] Implémenter refresh polling (AC: 5)
  - [x] Hook `useAlerts` avec TanStack Query (refetchInterval: 30000)
  - [x] Hook `useTopOpportunities` avec polling
  - [x] Indicateur "dernière mise à jour" sur chaque widget

## Dev Notes

### Architecture References
- Architecture v3.0 section 10 : Frontend Architecture
- Polling via TanStack Query (pas de WebSocket)
- UI/UX : Dark mode, esthétique terminal, couleurs néon

### Widget Layout (Desktop 1440px+)
```
+------------------+------------------+
|     Alertes      |  Top Opportunités|
|     (large)      |     (medium)     |
+------------------+------------------+
|   Portfolio      |    Watchlist     |
|   Summary        |    condensée     |
+------------------+------------------+
```

### Polling Strategy
```typescript
// hooks/useAlerts.ts
export function useAlerts() {
  return useQuery({
    queryKey: ['alerts'],
    queryFn: () => api.get('/alerts'),
    refetchInterval: 30_000, // 30 secondes
  });
}
```

### Dependencies
- Story 1.4 (Frontend shell) doit être complétée
- Story 4.1 (Score) pour Top Opportunités
- Story 5.1 (Alerts) pour widget alertes
- Story 2.1 (Portfolio) pour résumé

### Testing
- Tests composants avec Vitest + React Testing Library

## Change Log
| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2026-01-25 | 0.1 | Création initiale de la story | Sarah (PO) |
| 2026-01-25 | 0.2 | Remplacement WebSocket par polling (arch v3.0) | Winston (Architect) |
| 2026-02-08 | 1.0 | Implémentation dashboard widgets + polling + route watchlist | Codex |
